/**
 * @license
 * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.IncrementalDOM=e.IncrementalDOM||{})}(this,function(e){"use strict";function t(){}function n(e,t){this.attrs=a(),this.attrsArr=[],this.newAttrs=a(),this.staticsApplied=!1,this.key=t,this.keyMap=a(),this.keyMapValid=!0,this.focused=!1,this.nodeName=e,this.text=null}function r(){this.created=h.nodesCreated&&[],this.deleted=h.nodesDeleted&&[]}var i=Object.prototype.hasOwnProperty;t.prototype=Object.create(null);var o=function(e,t){return i.call(e,t)},a=function(){return new t},u="__incrementalDOMData",l=function(e,t,r){var i=new n(t,r);return e[u]=i,i},f=function(e){return c(e),e[u]},c=function(e){if(!e[u]){var t=e instanceof Element,n=t?e.localName:e.nodeName,r=t?e.getAttribute("key"):null,i=l(e,n,r);if(r&&(f(e.parentNode).keyMap[r]=e),t)for(var o=e.attributes,a=i.attrs,s=i.newAttrs,d=i.attrsArr,p=0;p<o.length;p+=1){var h=o[p],v=h.name,m=h.value;a[v]=m,s[v]=void 0,d.push(v),d.push(m)}for(var y=e.firstChild;y;y=y.nextSibling)c(y)}},s=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===f(t).nodeName?null:t.namespaceURI},d=function(e,t,n,r){var i=s(n,t),o=void 0;return o=i?e.createElementNS(i,n):e.createElement(n),l(o,n,r),o},p=function(e){var t=e.createTextNode("");return l(t,"#text",null),t},h={nodesCreated:null,nodesDeleted:null};r.prototype.markCreated=function(e){this.created&&this.created.push(e)},r.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},r.prototype.notifyChanges=function(){this.created&&this.created.length>0&&h.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&h.nodesDeleted(this.deleted)};var v=function(e){return e instanceof Document||e instanceof DocumentFragment},m=function(e,t){for(var n=[],r=e;r!==t;)n.push(r),r=r.parentNode;return n},y=function(e){for(var t=e,n=t;t;)n=t,t=t.parentNode;return n},g=function(e){var t=y(e);return v(t)?t.activeElement:null},k=function(e,t){var n=g(e);return n&&e.contains(n)?m(n,t):[]},x=function(e,t,n){for(var r=t.nextSibling,i=n;i!==t;){var o=i.nextSibling;e.insertBefore(i,r),i=o}},w=null,b=null,N=null,C=null,A=function(e,t){for(var n=0;n<e.length;n+=1)f(e[n]).focused=t},D=function(e){var t=function(t,n,i){var o=w,a=C,u=b,l=N;w=new r,C=t.ownerDocument,N=t.parentNode;var f=k(t,N);A(f,!0);var c=e(t,n,i);return A(f,!1),w.notifyChanges(),w=o,C=a,b=u,N=l,c};return t},O=D(function(e,t,n){return b=e,V(),t(n),T(),e}),M=D(function(e,t,n){var r={nextSibling:e};return b=r,t(n),e!==b&&e.parentNode&&I(N,e,f(N).keyMap),r===b?null:b}),S=function(e,t,n){var r=f(e);return t===r.nodeName&&n==r.key},E=function(e,t){if(!b||!S(b,e,t)){var n=f(N),r=b&&f(b),i=n.keyMap,o=void 0;if(t){var a=i[t];a&&(S(a,e,t)?o=a:a===b?w.markDeleted(a):I(N,a,i))}o||(o="#text"===e?p(C):d(C,N,e,t),t&&(i[t]=o),w.markCreated(o)),f(o).focused?x(N,o,b):r&&r.key&&!r.focused?(N.replaceChild(o,b),n.keyMapValid=!1):N.insertBefore(o,b),b=o}},I=function(e,t,n){t.parentNode===e&&e.removeChild(t),w.markDeleted(t);var r=f(t).key;r&&delete n[r]},j=function(){var e=N,t=f(e),n=t.keyMap,r=t.keyMapValid,i=e.lastChild,o=void 0;if(i!==b||!r){for(;i!==b;)I(e,i,n),i=e.lastChild;if(!r){for(o in n)i=n[o],i.parentNode!==e&&(w.markDeleted(i),delete n[o]);t.keyMapValid=!0}}},V=function(){N=b,b=null},P=function(){return b?b.nextSibling:N.firstChild},_=function(){b=P()},T=function(){j(),b=N,N=N.parentNode},B=function(e,t){return _(),E(e,t),V(),N},F=function(){return T(),b},L=function(){return _(),E("#text",null),b},R=function(){return N},U=function(){return P()},X=function(){b=N.lastChild},q=_,z={"default":"__default"},G=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},H=function(e,t,n){if(null==n)e.removeAttribute(t);else{var r=G(t);r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}},J=function(e,t,n){e[t]=n},K=function(e,t,n){t.indexOf("-")>=0?e.setProperty(t,n):e[t]=n},Q=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var r=e.style,i=n;for(var a in i)o(i,a)&&K(r,a,i[a])}},W=function(e,t,n){var r=typeof n;"object"===r||"function"===r?J(e,t,n):H(e,t,n)},Y=function(e,t,n){var r=f(e),i=r.attrs;if(i[t]!==n){var o=Z[t]||Z[z["default"]];o(e,t,n),i[t]=n}},Z=a();Z[z["default"]]=W,Z.style=Q;var $=3,ee=[],te=function(e,t,n){var r=B(e,t),i=f(r);if(!i.staticsApplied){if(n)for(var o=0;o<n.length;o+=2){var a=n[o],u=n[o+1];Y(r,a,u)}i.staticsApplied=!0}for(var l=i.attrsArr,c=i.newAttrs,s=!l.length,d=$,p=0;d<arguments.length;d+=2,p+=2){var h=arguments[d];if(s)l[p]=h,c[h]=void 0;else if(l[p]!==h)break;var u=arguments[d+1];(s||l[p+1]!==u)&&(l[p+1]=u,Y(r,h,u))}if(d<arguments.length||p<l.length){for(;d<arguments.length;d+=1,p+=1)l[p]=arguments[d];for(p<l.length&&(l.length=p),d=0;d<l.length;d+=2){var a=l[d],u=l[d+1];c[a]=u}for(var v in c)Y(r,v,c[v]),c[v]=void 0}return r},ne=function(e,t,n){ee[0]=e,ee[1]=t,ee[2]=n},re=function(e,t){ee.push(e),ee.push(t)},ie=function(){var e=te.apply(null,ee);return ee.length=0,e},oe=function(){var e=F();return e},ae=function(e){return te.apply(null,arguments),oe(e)},ue=function(e){var t=L(),n=f(t);if(n.text!==e){n.text=e;for(var r=e,i=1;i<arguments.length;i+=1){var o=arguments[i];r=o(r)}t.data=r}return t};e.patch=O,e.patchInner=O,e.patchOuter=M,e.currentElement=R,e.currentPointer=U,e.skip=X,e.skipNode=q,e.elementVoid=ae,e.elementOpenStart=ne,e.elementOpenEnd=ie,e.elementOpen=te,e.elementClose=oe,e.text=ue,e.attr=re,e.symbols=z,e.attributes=Z,e.applyAttr=H,e.applyProp=J,e.notifications=h,e.importNode=c});

//# sourceMappingURL=incremental-dom-min.js.map
